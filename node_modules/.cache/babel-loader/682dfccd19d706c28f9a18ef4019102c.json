{"ast":null,"code":"import _classCallCheck from\"/Users/german/dev/mesto-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/german/dev/mesto-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";var Api=/*#__PURE__*/function(){function Api(_ref){var baseUrl=_ref.baseUrl,headers=_ref.headers;_classCallCheck(this,Api);this._baseUrl=baseUrl;this._headers=headers;}_createClass(Api,[{key:\"_handleOriginal\",value:function _handleOriginal(res){if(!res.ok){return Promise.reject(\"Error: \".concat(res.status));}return res.json();}},{key:\"_getUserInfo\",value:function _getUserInfo(){var _this=this;return fetch(\"\".concat(this._baseUrl,\"/users/me\"),{headers:this._headers}).then(function(res){return _this._handleOriginal(res);});}},{key:\"_getInitialCards\",value:function _getInitialCards(){var _this2=this;return fetch(\"\".concat(this._baseUrl,\"/cards\"),{headers:this._headers}).then(function(res){return _this2._handleOriginal(res);});}},{key:\"getAppInfo\",value:function getAppInfo(){return Promise.all([this._getInitialCards(),this._getUserInfo()]);}},{key:\"createCard\",value:function createCard(data){var _this3=this;return fetch(\"\".concat(this._baseUrl,\"/cards\"),{method:'POST',headers:this._headers,body:JSON.stringify({name:data.name,link:data.link})}).then(function(res){return _this3._handleOriginal(res);});}},{key:\"deleteCard\",value:function deleteCard(CardId){var _this4=this;return fetch(\"\".concat(this._baseUrl,\"/cards/\").concat(CardId),{method:'DELETE',headers:this._headers}).then(function(res){return _this4._handleOriginal(res);});}},{key:\"editUserInfo\",value:function editUserInfo(data){var _this5=this;return fetch(\"\".concat(this._baseUrl,\"/users/me\"),{method:'PATCH',headers:this._headers,body:JSON.stringify({name:data.name,about:data.about})}).then(function(res){return _this5._handleOriginal(res);});}},{key:\"changeUserPicture\",value:function changeUserPicture(avatar){var _this6=this;console.log(avatar);return fetch(\"\".concat(this._baseUrl,\"/users/me/avatar\"),{method:'PATCH',headers:this._headers,body:JSON.stringify(avatar)}).then(function(res){return _this6._handleOriginal(res);});}},{key:\"changeLikeCardStatus\",value:function changeLikeCardStatus(cardID,isLiked){var _this7=this;return fetch(\"\".concat(this._baseUrl,\"/cards/likes/\").concat(cardID),{method:isLiked?'PUT':'DELETE',headers:this._headers}).then(function(res){return _this7._handleOriginal(res);});}// deleteLikeCard(cardID) {\n//   return fetch(`${this._baseUrl}/cards/likes/${cardID}`, {\n//     method: 'DELETE',\n//     headers: this._headers\n//   })\n//     .then(res => this._handleOriginal(res));\n// }\n}]);return Api;}();var api=new Api({baseUrl:'https://mesto.nomoreparties.co/v1/cohort-14',headers:{authorization:'c543d785-697b-4b19-aa15-a606529eab61','Content-Type':'application/json'}});export default api;","map":{"version":3,"sources":["/Users/german/dev/mesto-react/src/utils/api.js"],"names":["Api","baseUrl","headers","_baseUrl","_headers","res","ok","Promise","reject","status","json","fetch","then","_handleOriginal","all","_getInitialCards","_getUserInfo","data","method","body","JSON","stringify","name","link","CardId","about","avatar","console","log","cardID","isLiked","api","authorization"],"mappings":"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","sourcesContent":["class Api {\n  constructor({ baseUrl, headers}) {\n    this._baseUrl = baseUrl;\n    this._headers = headers;\n  }\n\n  _handleOriginal(res) {\n    if (!res.ok) {\n      return Promise.reject(`Error: ${res.status}`);\n  }\n    return res.json();\n  }\n\n  _getUserInfo() {\n    return fetch(`${this._baseUrl}/users/me`, {\n      headers: this._headers\n    })\n      .then(res => this._handleOriginal(res));\n  }\n\n  _getInitialCards() {\n    return fetch(`${this._baseUrl}/cards`, {\n      headers: this._headers\n    })\n      .then(res => this._handleOriginal(res))\n  }\n\n  getAppInfo() {\n    return Promise.all([this._getInitialCards(), this._getUserInfo()]);\n  }\n\n  createCard(data) {\n    return fetch(`${this._baseUrl}/cards`, {\n      method: 'POST',\n      headers: this._headers,\n      body: JSON.stringify({\n        name: data.name,\n        link: data.link\n      })\n    })\n      .then(res => this._handleOriginal(res));\n  }\n\n  deleteCard(CardId) {\n    return fetch(`${this._baseUrl}/cards/${CardId}`, {\n      method: 'DELETE',\n      headers: this._headers,\n    })\n      .then(res => this._handleOriginal(res));\n  }\n\n  editUserInfo(data) {\n    return fetch(`${this._baseUrl}/users/me`, {\n      method: 'PATCH',\n      headers: this._headers,\n      body: JSON.stringify({\n        name: data.name,\n        about: data.about\n      })\n    })\n      .then(res => this._handleOriginal(res));\n  }\n\n  changeUserPicture(avatar) {\n    console.log(avatar);\n    return fetch(`${this._baseUrl}/users/me/avatar`, {\n      method: 'PATCH',\n      headers: this._headers,\n      body: JSON.stringify(avatar)\n    })\n      .then(res => this._handleOriginal(res));\n  }\n\n  changeLikeCardStatus(cardID, isLiked) {\n    return fetch(`${this._baseUrl}/cards/likes/${cardID}`, {\n      method: isLiked ? 'PUT' : 'DELETE',\n      headers: this._headers\n    })\n      .then(res => this._handleOriginal(res));\n  }\n\n  // deleteLikeCard(cardID) {\n  //   return fetch(`${this._baseUrl}/cards/likes/${cardID}`, {\n  //     method: 'DELETE',\n  //     headers: this._headers\n  //   })\n  //     .then(res => this._handleOriginal(res));\n  // }\n\n}\n\nconst api = new Api({\n  baseUrl: 'https://mesto.nomoreparties.co/v1/cohort-14',\n  headers: {\n    authorization: 'c543d785-697b-4b19-aa15-a606529eab61',\n    'Content-Type': 'application/json'\n  }\n});\n\nexport default api;"]},"metadata":{},"sourceType":"module"}