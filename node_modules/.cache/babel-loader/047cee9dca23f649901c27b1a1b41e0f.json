{"ast":null,"code":"import _toConsumableArray from\"/Users/german/dev/mesto-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/Users/german/dev/mesto-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import Header from'./Header';import Main from'./Main';import Footer from'./Footer';import Preloader from'./Preloader';import{EditProfilePopup}from'./EditProfilePopup';import{EditAvatarPopup}from'./EditAvatarPopup';import{PopupDeleteCard}from'./PopupDeleteCard';import ImagePopup from'./ImagePopup';import api from'../utils/api.js';import{transformCard}from\"../utils/transformCard\";import{CurrentUserContext}from\"../contexts/CurrentUserContext\";import{InitialCards}from\"../contexts/initialCards\";import{TextForSubmitBtn,textForSubmitBtn}from\"../contexts/TextForSubmitBtn\";import{AddPlacePopup}from\"./AddPlacePopup\";function App(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isEditProfilePopupOpen=_useState2[0],setIsEditProfilePopupOpen=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isAddPlacePopupOpen=_useState4[0],setIsAddPlacePopupOpen=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isEditAvatarPopupOpen=_useState6[0],setIsEditAvatarPopupOpen=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),isDeleteCardPopupOpen=_useState8[0],setIsDeleteCardPopupOpen=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),isImgPopupOpen=_useState10[0],setIsImgPopupOpen=_useState10[1];var _useState11=useState(null),_useState12=_slicedToArray(_useState11,2),selectedCard=_useState12[0],setSelectedCard=_useState12[1];var _useState13=useState({}),_useState14=_slicedToArray(_useState13,2),currentUser=_useState14[0],setCurrentUser=_useState14[1];var _useState15=useState([]),_useState16=_slicedToArray(_useState15,2),cards=_useState16[0],setCards=_useState16[1];var _useState17=useState(false),_useState18=_slicedToArray(_useState17,2),isLoading=_useState18[0],setIsLoading=_useState18[1];var handleEditAvatarClick=function handleEditAvatarClick(){setIsEditAvatarPopupOpen(!isEditAvatarPopupOpen);};var handleEditProfileClick=function handleEditProfileClick(){setIsEditProfilePopupOpen(!isEditProfilePopupOpen);};var handleAddPlaceClick=function handleAddPlaceClick(){setIsAddPlacePopupOpen(!isAddPlacePopupOpen);};var handleDeleteCardClick=function handleDeleteCardClick(){setIsDeleteCardPopupOpen(!isDeleteCardPopupOpen);};var handleImgCardClick=function handleImgCardClick(){setIsImgPopupOpen(!isImgPopupOpen);};var closeAllPopups=function closeAllPopups(){setIsEditAvatarPopupOpen(false);setIsEditProfilePopupOpen(false);setIsAddPlacePopupOpen(false);setIsDeleteCardPopupOpen(false);setIsImgPopupOpen(false);setSelectedCard(null);};useEffect(function(){setIsLoading(true);api.getAppInfo().then(function(data){var _data=_slicedToArray(data,2),initialCards=_data[0],currentUserData=_data[1];setCurrentUser(currentUserData);var items=initialCards.map(function(card){return transformCard(card);});setCards(items);}).catch(function(err){return console.log(err);}).finally(function(){return setIsLoading(false);});},[]);//обновляем данные пользователя\nvar handleUpdateUser=function handleUpdateUser(data){api.editUserInfo(data).then(function(data){setCurrentUser(data);closeAllPopups();}).catch(function(err){return console.log(err);});};//обновляем автар\nvar handleUpdateAvatar=function handleUpdateAvatar(avatar){api.changeUserPicture(avatar).then(function(avatar){setCurrentUser(avatar);closeAllPopups();}).catch(function(err){return console.log(err);});};//функция лайков и дизлайков\nvar handleCardLike=function handleCardLike(card){// Снова проверяем, есть ли уже лайк на этой карточке\nvar isLiked=card.likes.some(function(i){return i._id===currentUser._id;});// Отправляем запрос в API и получаем обновлённые данные карточки\napi.changeLikeCardStatus(card._id,!isLiked).then(function(newCard){// Формируем новый массив на основе имеющегося, подставляя в него новую карточку\nvar newCards=cards.map(function(c){return c._id===card._id?newCard:c;});// Обновляем стейт\nsetCards(newCards);}).catch(function(err){return console.log(err);});};//обработчик добавления новых карточек\nvar handleAddPlaceSubmit=function handleAddPlaceSubmit(newCard){api.createCard(newCard).then(function(newCard){var newItem=transformCard(newCard);setCards([newItem].concat(_toConsumableArray(cards)));closeAllPopups();}).catch(function(err){return console.log(err);});};//обработчик удаления карточек\nvar handleCardDelete=function handleCardDelete(card){api.deleteCard(card._id).then(function(){var newCards=cards.filter(function(c){return c._id!==card._id;});setCards(newCards);closeAllPopups();}).catch(function(err){return console.log(err);});};return/*#__PURE__*/React.createElement(InitialCards.Provider,{value:cards},/*#__PURE__*/React.createElement(CurrentUserContext.Provider,{value:currentUser},/*#__PURE__*/React.createElement(\"div\",{className:\"page\"},/*#__PURE__*/React.createElement(Header,null),isLoading?/*#__PURE__*/React.createElement(Preloader,null):/*#__PURE__*/React.createElement(Main,{onEditAvatar:handleEditAvatarClick,onEditProfile:handleEditProfileClick,onAddPlace:handleAddPlaceClick,onPopupDeleteCard:handleDeleteCardClick,onPopupImg:handleImgCardClick,onCardClick:setSelectedCard,onCardLike:handleCardLike}),/*#__PURE__*/React.createElement(Footer,null),/*#__PURE__*/React.createElement(TextForSubmitBtn.Provider,{value:textForSubmitBtn},/*#__PURE__*/React.createElement(EditProfilePopup,{isOpen:isEditProfilePopupOpen,onClose:closeAllPopups,onUpdateUser:handleUpdateUser}),/*#__PURE__*/React.createElement(EditAvatarPopup,{isOpen:isEditAvatarPopupOpen,onClose:closeAllPopups,onUpdateAvatar:handleUpdateAvatar}),/*#__PURE__*/React.createElement(AddPlacePopup,{isOpen:isAddPlacePopupOpen,onClose:closeAllPopups,onAddPlace:handleAddPlaceSubmit}),/*#__PURE__*/React.createElement(PopupDeleteCard,{isOpen:isDeleteCardPopupOpen,onClose:closeAllPopups,card:selectedCard,onCardDelete:handleCardDelete}),/*#__PURE__*/React.createElement(ImagePopup,{isOpen:isImgPopupOpen,onClose:closeAllPopups,card:selectedCard})))));}export default App;","map":{"version":3,"sources":["/Users/german/dev/mesto-react/src/components/App.js"],"names":["React","useEffect","useState","Header","Main","Footer","Preloader","EditProfilePopup","EditAvatarPopup","PopupDeleteCard","ImagePopup","api","transformCard","CurrentUserContext","InitialCards","TextForSubmitBtn","textForSubmitBtn","AddPlacePopup","App","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","isDeleteCardPopupOpen","setIsDeleteCardPopupOpen","isImgPopupOpen","setIsImgPopupOpen","selectedCard","setSelectedCard","currentUser","setCurrentUser","cards","setCards","isLoading","setIsLoading","handleEditAvatarClick","handleEditProfileClick","handleAddPlaceClick","handleDeleteCardClick","handleImgCardClick","closeAllPopups","getAppInfo","then","data","initialCards","currentUserData","items","map","card","catch","err","console","log","finally","handleUpdateUser","editUserInfo","handleUpdateAvatar","avatar","changeUserPicture","handleCardLike","isLiked","likes","some","i","_id","changeLikeCardStatus","newCard","newCards","c","handleAddPlaceSubmit","createCard","newItem","handleCardDelete","deleteCard","filter"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from 'react';\nimport Header from './Header';\nimport Main from './Main';\nimport Footer from './Footer';\nimport Preloader from './Preloader';\nimport { EditProfilePopup } from './EditProfilePopup';\nimport { EditAvatarPopup } from './EditAvatarPopup';\nimport { PopupDeleteCard} from './PopupDeleteCard';\nimport ImagePopup from './ImagePopup';\nimport api from '../utils/api.js';\nimport {transformCard} from \"../utils/transformCard\";\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\nimport { InitialCards } from \"../contexts/initialCards\";\nimport {TextForSubmitBtn, textForSubmitBtn} from \"../contexts/TextForSubmitBtn\";\nimport { AddPlacePopup } from \"./AddPlacePopup\";\n\nfunction App() {\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = useState(false);\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = useState(false);\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = useState(false);\n  const [isDeleteCardPopupOpen, setIsDeleteCardPopupOpen] = useState(false);\n  const [isImgPopupOpen, setIsImgPopupOpen] = useState(false);\n  const [selectedCard, setSelectedCard] = useState(null);\n  const [currentUser, setCurrentUser] = useState({});\n  const [cards, setCards] = useState([]);\n  const [isLoading, setIsLoading] = useState(false);\n\n  const handleEditAvatarClick = () => {\n    setIsEditAvatarPopupOpen(!isEditAvatarPopupOpen);\n  }\n\n  const handleEditProfileClick = () => {\n    setIsEditProfilePopupOpen(!isEditProfilePopupOpen);\n  }\n\n  const handleAddPlaceClick = () => {\n    setIsAddPlacePopupOpen(!isAddPlacePopupOpen);\n  }\n\n  const handleDeleteCardClick = () => {\n    setIsDeleteCardPopupOpen(!isDeleteCardPopupOpen);\n  }\n\n  const handleImgCardClick = () => {\n    setIsImgPopupOpen(!isImgPopupOpen);\n  }\n\n  const closeAllPopups = () => {\n    setIsEditAvatarPopupOpen(false);\n    setIsEditProfilePopupOpen(false);\n    setIsAddPlacePopupOpen(false);\n    setIsDeleteCardPopupOpen(false);\n    setIsImgPopupOpen(false);\n    setSelectedCard(null);\n  }\n\n  useEffect(() => {\n    setIsLoading(true);\n    api.getAppInfo()\n      .then(data => {\n        const [initialCards, currentUserData ] = data;\n        setCurrentUser(currentUserData);\n        const items = initialCards.map( card => transformCard(card));\n        setCards(items);\n      })\n      .catch(err => console.log(err))\n      .finally(() => setIsLoading(false));\n  }, [])\n\n  //обновляем данные пользователя\n  const handleUpdateUser = (data) => {\n    api.editUserInfo(data)\n      .then(data => {\n        setCurrentUser(data);\n        closeAllPopups();\n      })\n      .catch(err => console.log(err))\n  }\n\n  //обновляем автар\n  const handleUpdateAvatar = (avatar) => {\n    api.changeUserPicture(avatar)\n      .then( avatar => {\n        setCurrentUser(avatar);\n        closeAllPopups()\n      })\n      .catch(err => console.log(err))\n  }\n\n  //функция лайков и дизлайков\n  const handleCardLike = (card) => {\n    // Снова проверяем, есть ли уже лайк на этой карточке\n    const isLiked = card.likes.some(i => i._id === currentUser._id);\n\n    // Отправляем запрос в API и получаем обновлённые данные карточки\n    api.changeLikeCardStatus(card._id, !isLiked)\n      .then((newCard) => {\n\n      // Формируем новый массив на основе имеющегося, подставляя в него новую карточку\n      const newCards = cards.map(c => c._id === card._id ? newCard : c);\n\n      // Обновляем стейт\n      setCards(newCards)\n    })\n      .catch(err => console.log(err))\n  }\n\n  //обработчик добавления новых карточек\n  const handleAddPlaceSubmit = (newCard) => {\n    api.createCard(newCard)\n      .then(newCard => {\n        const newItem = transformCard(newCard);\n        setCards([newItem, ...cards]);\n        closeAllPopups();\n      })\n      .catch(err => console.log(err))\n  }\n\n  //обработчик удаления карточек\n  const handleCardDelete = (card) => {\n    api.deleteCard(card._id)\n      .then(() => {\n        const newCards = cards.filter(c => c._id !== card._id)\n        setCards(newCards);\n        closeAllPopups();\n      })\n      .catch(err => console.log(err))\n  }\n\n  return (\n    <InitialCards.Provider value={cards}>\n      <CurrentUserContext.Provider value={currentUser}>\n        <div className=\"page\">\n          <Header />\n          {isLoading ?\n            <Preloader /> :\n            <Main\n            onEditAvatar={handleEditAvatarClick}\n            onEditProfile={handleEditProfileClick}\n            onAddPlace={handleAddPlaceClick}\n            onPopupDeleteCard={handleDeleteCardClick}\n            onPopupImg={handleImgCardClick}\n            onCardClick={setSelectedCard}\n            onCardLike={handleCardLike}\n          />}\n          <Footer />\n\n          <TextForSubmitBtn.Provider value={textForSubmitBtn}>\n            <EditProfilePopup\n              isOpen={isEditProfilePopupOpen}\n              onClose={closeAllPopups}\n              onUpdateUser={handleUpdateUser}\n            />\n\n            <EditAvatarPopup\n              isOpen={isEditAvatarPopupOpen}\n              onClose={closeAllPopups}\n              onUpdateAvatar={handleUpdateAvatar}\n            />\n\n            <AddPlacePopup\n              isOpen={isAddPlacePopupOpen}\n              onClose={closeAllPopups}\n              onAddPlace={handleAddPlaceSubmit}\n            />\n\n            <PopupDeleteCard\n              isOpen={isDeleteCardPopupOpen}\n              onClose={closeAllPopups}\n              card={selectedCard}\n              onCardDelete={handleCardDelete}\n            />\n\n            <ImagePopup\n              isOpen={isImgPopupOpen}\n              onClose={closeAllPopups}\n              card={selectedCard}\n            />\n          </TextForSubmitBtn.Provider>\n        </div>\n      </CurrentUserContext.Provider>\n    </InitialCards.Provider>\n  );\n}\nexport default App;\n"]},"metadata":{},"sourceType":"module"}